<!DOCTYPE html>
<html>
<head>
  <title>Admin Login | TechFest</title>
  <style>
    body{
      background:#0b1c2d;color:white;
      display:flex;justify-content:center;align-items:center;height:100vh;
      font-family:sans-serif;
    }
    .box{background:#111;padding:40px;border-radius:16px;text-align:center}
    input,button{padding:12px;width:100%;margin-top:12px}
    button{background:#d4af37;border:none;font-weight:bold;cursor:pointer}
  </style>
</head>
<body>

<div class="box">
  <h2>ğŸ” Admin Login</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <p id="msg"></p>
</div>

<script>
function login(){
  fetch("https://techfest-backend.onrender.com/auth/login",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({
      username: username.value,
      password: password.value
    })
  })
  .then(res => {
    if(!res.ok) throw new Error();
    return res.json();
  })
  .then(data => {
    sessionStorage.setItem("admin","true");
    sessionStorage.setItem("role", data.role);

    if (data.role === "SCANNER") {
      window.location.href = "scan.html";
    } else {
      window.location.href = "admin.html";
    }
  })
  .catch(()=>{
    msg.innerText = "âŒ Invalid credentials";
  });
}
</script>

</body>
</html>
